<!DOCTYPE html>
<html lang="en">
<!--
  $TREATZ ‚Äî ‚ÄúWhitepaper‚Äù Jump Scare
  --------------------------------------------------------
  QUICK CONFIG (edit values here; no code hunting needed)
    - data-halloween-iso: Countdown target (local TZ-aware ISO)
    - data-cta-coinflip:  Where "Play Trick or Treat" goes
    - data-cta-jackpot:   Where "Enter the Jackpot" goes
    - data-scream-src:    Path to your scream SFX
    - data-use-emojis:    "true" to use emoji flyers, "false" to use PNG/SVGs
  To use custom images for flyers, see JS section "FLYER ART".
-->
<head>
  <!-- ========== META / TITLE ========== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>$TREATZ ‚Äî ‚ÄúWhitepaper‚Äù</title>

  <!-- ========== FONTS & BASE STYLES (reuse brand tokens) ========== -->
  <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css?v=14" />

  <!-- ========== PAGE-SPECIFIC STYLES ========== -->
  <style>
    /* -------------------------
       1) BASE LAYOUT
    --------------------------*/
    :root{
      /* Tokens already in style.css:
         --orange --orange-hi --witch --slime --jet --white --gray
         --bg-a   --bg-b      --card --card-border --shadow
      */
    }
    body{
      margin:0; color:var(--white); background:linear-gradient(180deg,var(--bg-a),var(--bg-b));
      font-family:Rubik,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      overflow:hidden;
    }

    /* Countdown (copied from site; keep visual parity) */
    .countdown{position:sticky; top:0; z-index:1000; background:linear-gradient(90deg, rgba(255,107,0,.92), rgba(106,0,255,.92)); border-bottom:1px solid rgba(255,255,255,.2)}
    .countdown__inner{max-width:1200px; margin:0 auto; padding:.55rem .9rem; display:flex; gap:.75rem; align-items:center; justify-content:center; flex-wrap:wrap}
    .countdown__label{font-weight:700; letter-spacing:.3px}
    .countdown__timer{font-family:"Luckiest Guy", cursive; font-size:1.25rem; padding:0 .25rem}
    .countdown__omen{font-size:.95rem; opacity:.9}

    /* Background FX (cosmic brand fog) */
    .bgfx{
      position:fixed; inset:-10%; z-index:-1;
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(106,0,255,.25), transparent 60%),
        radial-gradient(900px 500px at 80% 70%, rgba(0,255,163,.18), transparent 55%),
        linear-gradient(180deg, var(--bg-a), var(--bg-b));
      filter:saturate(1.05) brightness(.9);
    }

    /* Stage + Card */
    .stage{ position:fixed; inset:0; display:grid; place-items:center; pointer-events:none; }
    .cardy{
      pointer-events:auto;
      max-width:860px; margin:6vh auto 10vh; padding:28px;
      background:linear-gradient(180deg, rgba(13,13,13,.86), rgba(13,13,13,.6));
      border:1px solid var(--card-border); border-radius:18px; box-shadow:var(--shadow);
      text-align:center; position:relative; z-index:10;
    }

    /* Headline + Sub */
    .boo{
      font-family:"Luckiest Guy",cursive;
      font-size:clamp(40px,10vw,120px); line-height:.9;
      color:var(--orange);
      text-shadow:0 0 24px rgba(255,149,0,.45), 0 0 36px rgba(106,0,255,.45);
      transform:scale(.98); opacity:0;
      transition:opacity .9s ease, transform .9s cubic-bezier(.2,.7,.2,1);
      user-select:none;
    }
    .boo.show{ opacity:1; transform:scale(1); }

    .sub{
      margin:12px auto 2px; font-weight:700; letter-spacing:.3px; opacity:.92;
      color:var(--slime); text-shadow:0 0 10px rgba(0,255,163,.35);
    }

    /* Copy */
    .explain{
      margin:14px auto 0; max-width:740px; text-align:left;
      opacity:0; transition:opacity 1.2s ease 250ms;
    }
    .explain.show{opacity:1;}
    .explain ul{margin:.6rem 0 .2rem 1.1rem;}
    .explain li{margin:.25rem 0;}
    .explain em{color:#94DAFF; font-style:normal; font-weight:700}

    /* CTA Buttons (reuse site button styles) */
    .cta{ margin-top:18px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
    .btn{cursor:pointer; border:none; padding:.8rem 1.1rem; border-radius:14px; font-weight:900;}
    .btn--primary{background:linear-gradient(180deg,var(--orange),var(--orange-hi)); color:#1a0b00}
    .btn--outline{background:transparent; color:var(--white); border:1px solid var(--white); opacity:.95}
    .muted{opacity:.8; font-size:.9rem; margin-top:8px; text-align:center;}

    /* Veil (unmutes audio on user gesture) */
    .veil{
      position:fixed; inset:0; display:grid; place-items:center; z-index:20;
      background:rgba(13,13,13,.65); backdrop-filter:blur(6px);
    }
    .veil__card{
      background:linear-gradient(180deg, rgba(13,13,13,.92), rgba(13,13,13,.75));
      border:1px solid var(--card-border); padding:18px 22px; border-radius:16px; text-align:center;
      box-shadow:var(--shadow);
    }
    .veil__title{font-family:"Luckiest Guy"; font-size:1.75rem; margin:0 0 6px; color:var(--orange)}
    .veil__btn{margin-top:10px}

    /* Flyers (ghosts, bats, ghouls, zombies) */
    .flyer{
      position:fixed; left:50%; top:55%; transform:translate(-50%,-50%) scale(.2);
      filter:drop-shadow(0 8px 24px rgba(0,0,0,.55));
      opacity:0; pointer-events:none; z-index:5;
      will-change:transform, opacity, filter;
      animation:swoop 1.2s cubic-bezier(.2,.6,.2,1) forwards;
    }
    .flyer--ghost{ font-size:80px; text-shadow:0 0 18px rgba(148,218,255,.6); }
    .flyer--bat  { font-size:56px; text-shadow:0 0 14px rgba(255,255,255,.25); }
    .flyer--ghoul{ font-size:84px; text-shadow:0 0 18px rgba(106,0,255,.45); color:#bba0ff; }
    .flyer--zomb { font-size:84px; text-shadow:0 0 18px rgba(0,255,163,.35); color:#b6ffd9; }

    @keyframes swoop{
      0%{opacity:0; transform:translate(-50%,-50%) scale(.2) rotate(0deg);}
      5%{opacity:1;}
      80%{opacity:1; filter:blur(0px);}
      100%{opacity:0; transform:translate(-50%,-50%) scale(6) rotate(3deg); filter:blur(4px);}
    }

    /* Motion safety */
    @media (prefers-reduced-motion: reduce){
      .flyer{animation:none; opacity:.85; transform:translate(-50%,-50%) scale(1);}
    }
  </style>
</head>

<body
  id="page"
  data-halloween-iso="2025-10-31T00:00:00-04:00"
  data-cta-coinflip="index.html#coin-flip"
  data-cta-jackpot="index.html#jackpot"
  data-scream-src="assets/scream.mp3"
  data-use-emojis="true"
>
  <!-- =========================================================
       A) COUNTDOWN (same IDs as index so behaviour matches)
  ========================================================== -->
  <header class="countdown" id="countdown" role="banner" aria-label="Halloween Countdown">
    <div class="countdown__inner">
      <span class="countdown__label">‚è≥ Countdown to Halloween:</span>
      <span class="countdown__timer" id="countdown-timer">--d --h --m --s</span>
      <span class="countdown__omen" id="countdown-omen" aria-live="polite"></span>
    </div>
  </header>

  <!-- =========================================================
       B) BACKGROUND FX
  ========================================================== -->
  <div class="bgfx" aria-hidden="true"></div>

  <!-- =========================================================
       C) MAIN CONTENT
  ========================================================== -->
  <main class="stage" role="main">
    <section class="cardy" aria-live="polite">
      <h1 class="boo" id="boo" aria-label="Boo! Jump Scare">üëª BOO! üëª</h1>
      <p class="sub">You expected a whitepaper. You got a fright-paper.</p>

      <div class="explain" id="explain">
        <h2 style="margin:.2rem 0 .4rem">Why no ‚Äúwhitepaper‚Äù?</h2>
        <p><strong>Because it‚Äôs Halloween</strong>‚Äîand because <strong>$TREATZ</strong> is simple, on-chain, and meme-propelled:</p>
        <ul>
          <li>üéÉ <em>Trick or Treat Coin Toss</em> ‚Äî Pick TRICK or TREAT, send your wager, find your fate.</li>
          <li>üïØÔ∏è <em>Jackpot Raffle</em> ‚Äî 80% winner ‚Ä¢ 10% burned ‚Ä¢ 10% dev. Pots glow, chains know.</li>
          <li>üí® <em>The Meme is the Prophecy</em> ‚Äî Chaos, candy, and one glorious pump.</li>
        </ul>
        <p><strong>The chain is the whitepaper.</strong> The code is the contract. The community is the roadmap.</p>

        <div class="cta" id="cta">
          <a class="btn btn--primary" id="cta-coinflip" href="#">Play Trick or Treat</a>
          <a class="btn btn--outline" id="cta-jackpot"  href="#">Enter the Jackpot</a>
        </div>
        <p class="muted">Want docs later? We‚Äôll post a short overview‚Äîbut for now, follow the lanterns and play.</p>
      </div>
    </section>
  </main>

  <!-- =========================================================
       D) VEIL (required to unlock audio on most browsers)
  ========================================================== -->
  <div class="veil" id="veil" role="dialog" aria-modal="true" aria-labelledby="veil-title">
    <div class="veil__card">
      <h2 class="veil__title" id="veil-title">Ready for a Fright?</h2>
      <p>Tap to unveil the ‚Äúwhitepaper.‚Äù Sound on üîä</p>
      <button class="btn btn--primary veil__btn" id="begin">Unveil the Truth</button>
    </div>
  </div>

  <!-- =========================================================
       E) AUDIO
  ========================================================== -->
  <audio id="scream" preload="auto">
    <!-- src set via data-scream-src for easy swapping -->
  </audio>

  <!-- ========== SCRIPTS ========== -->
  <script>
    /* -------------------------------------------------------
       1) UTILS & CONFIG
    --------------------------------------------------------*/
    const $      = (sel, ctx=document) => ctx.querySelector(sel);
    const pageEl = $('#page');

    const CFG = {
      halloweenISO: pageEl.dataset.halloweenIso || '2025-10-31T00:00:00-04:00',
      ctaCoinflip : pageEl.dataset.ctaCoinflip  || 'index.html#coin-flip',
      ctaJackpot  : pageEl.dataset.ctaJackpot   || 'index.html#jackpot',
      screamSrc   : pageEl.dataset.screamSrc    || 'assets/scream.mp3',
      useEmojis   : (pageEl.dataset.useEmojis || 'true').toLowerCase() === 'true'
    };

    /* -------------------------------------------------------
       2) COUNTDOWN (mirror behaviour from homepage)
    --------------------------------------------------------*/
    (function countdown(){
      const target  = new Date(CFG.halloweenISO);
      const timerEl = $('#countdown-timer');
      const omenEl  = $('#countdown-omen');
      const omens   = [
        'Gremlin in the mempool spotted.',
        'Witches brewing liquidity‚Ä¶',
        'Ghosts front-running paper hands.',
        'Pumpkins aligned. Candles lit.',
        'Never fade the night shift.',
        'Trick? Treat? Only the chain knows.',
        'Beware the spooky slippage.'
      ];
      function tick(){
        const now = new Date();
        const diff = Math.max(0, target - now);
        const s = Math.floor(diff/1000);
        const d = Math.floor(s/86400);
        const h = Math.floor((s%86400)/3600);
        const m = Math.floor((s%3600)/60);
        const sec = s%60;
        timerEl.textContent = `${d}d ${h}h ${m}m ${sec}s`;
        if (Math.random() < 0.01)      omenEl.textContent = '??? A strange puff passes by‚Ä¶';
        else if (sec % 10 === 0)       omenEl.textContent = omens[Math.floor(Math.random()*omens.length)];
      }
      tick(); setInterval(tick, 1000);
    })();

    /* -------------------------------------------------------
       3) CTA WIRING
    --------------------------------------------------------*/
    $('#cta-coinflip').href = CFG.ctaCoinflip;
    $('#cta-jackpot').href  = CFG.ctaJackpot;

    /* -------------------------------------------------------
       4) AUDIO INIT
    --------------------------------------------------------*/
    const scream = $('#scream');
    scream.src = CFG.screamSrc;

    /* -------------------------------------------------------
       5) FLYER ART
         - Default uses emojis (üëªü¶áüßü‚Ä¶). To use images:
           * set data-use-emojis="false"
           * define IMGS below with your asset paths
    --------------------------------------------------------*/
    const EMOJIS = ['üëª','ü¶á','üßü','üßü‚Äç‚ôÄÔ∏è','üßü‚Äç‚ôÇÔ∏è','üßå'];
    const IMGS   = [
      // { src: 'assets/ghost.png', cls: 'flyer flyer--ghost', size: 96 },
      // { src: 'assets/bat.png',   cls: 'flyer flyer--bat',   size: 72 },
      // { src: 'assets/ghoul.png', cls: 'flyer flyer--ghoul', size: 104 },
      // { src: 'assets/zombie.png',cls: 'flyer flyer--zomb',  size: 104 },
    ];

    function spawnFlyer(){
      let el;
      if (CFG.useEmojis){
        el = document.createElement('div');
        el.className = 'flyer';
        const pick = EMOJIS[Math.floor(Math.random()*EMOJIS.length)];
        el.textContent = pick;
        if (pick === 'üëª') el.classList.add('flyer--ghost');
        else if (pick === 'ü¶á') el.classList.add('flyer--bat');
        else if (pick.startsWith('üßü')) el.classList.add('flyer--zomb');
        else el.classList.add('flyer--ghoul');
      } else {
        const pick = IMGS[Math.floor(Math.random()*IMGS.length)];
        el = document.createElement('img');
        el.src = pick.src; el.alt = 'spook';
        el.className = pick.cls || 'flyer';
        el.style.width = (pick.size || 96) + 'px';
      }
      const jitterX = (Math.random()*60-30);
      const jitterY = (Math.random()*30-15);
      el.style.left = `calc(50% + ${jitterX}px)`;
      el.style.top  = `calc(55% + ${jitterY}px)`;
      document.body.appendChild(el);
      el.addEventListener('animationend', ()=> el.remove());
    }
    function burst(count=10, spreadMs=420){
      let i = 0;
      const t = setInterval(()=>{
        spawnFlyer();
        if (++i >= count) clearInterval(t);
      }, Math.max(40, Math.floor(spreadMs/count)));
    }

    /* -------------------------------------------------------
       6) JUMP-SCARE SEQUENCE
    --------------------------------------------------------*/
    const veil  = $('#veil');
    const begin = $('#begin');
    const booEl = $('#boo');
    const txtEl = $('#explain');

    async function startShow(){
      try { scream.currentTime = 0; await scream.play(); } catch(e){}
      requestAnimationFrame(()=> booEl.classList.add('show'));
      burst(18, 560);
      setTimeout(()=> txtEl.classList.add('show'), 800);
      // ambient loop/small bursts: uncomment to add ongoing vibes
      // setInterval(()=> burst(3, 180), 1600);
    }

    begin.addEventListener('click', ()=>{
      veil.remove();
      startShow();
    });
    document.addEventListener('keydown', (e)=>{ if ($('#veil') && e.key === 'Enter') begin.click(); });
  </script>
</body>
</html>
